# ============================================================================
# INVESTMENT ANALYSIS APP - ENVIRONMENT CONFIGURATION TEMPLATE
# ============================================================================
# SECURITY WARNING: NEVER commit real secrets to version control!
# Copy this file to .env and replace placeholder values with actual secrets
# ============================================================================

# ============================================================================
# ENVIRONMENT SETTINGS
# ============================================================================
# Options: development, staging, production
ENVIRONMENT=development
DEBUG=false
LOG_LEVEL=INFO
NODE_ENV=development

# ============================================================================
# APPLICATION CORE
# ============================================================================
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=your_secret_key_here_min_64_chars_required_for_production
JWT_SECRET_KEY=your_jwt_secret_here_min_64_chars_required_for_production
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# Encryption keys for sensitive data
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
FERNET_KEY=your_fernet_key_here_generate_with_cryptography_library

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# PostgreSQL (Primary Database)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=investment_db
DB_USER=postgres
DB_PASSWORD=your_secure_password_here
DATABASE_URL=postgresql://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_NAME}
DB_SSL_MODE=prefer  # Options: disable, allow, prefer, require, verify-ca, verify-full

# Redis (Caching & Sessions)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password_here
REDIS_DB=0
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}
REDIS_SSL=false
REDIS_MAXMEMORY=512mb
REDIS_MAXMEMORY_POLICY=allkeys-lru

# Elasticsearch (OPTIONAL - disabled by default to save $15-20/month)
# The platform uses PostgreSQL full-text search instead. Only enable if you need
# advanced log aggregation capabilities.
# ELASTICSEARCH_HOST=localhost
# ELASTICSEARCH_PORT=9200
# ELASTICSEARCH_USER=elastic
# ELASTICSEARCH_PASSWORD=your_elasticsearch_password_here
# ELASTICSEARCH_URL=http://${ELASTICSEARCH_USER}:${ELASTICSEARCH_PASSWORD}@${ELASTICSEARCH_HOST}:${ELASTICSEARCH_PORT}
# ELASTICSEARCH_HEAP_SIZE=512m

# ============================================================================
# FINANCIAL DATA API KEYS
# ============================================================================
# Alpha Vantage (25 calls/day free tier)
# Get key at: https://www.alphavantage.co/support/#api-key
ALPHA_VANTAGE_API_KEY=your_alpha_vantage_api_key_here

# Finnhub (60 calls/minute free tier)
# Get key at: https://finnhub.io/register
FINNHUB_API_KEY=your_finnhub_api_key_here

# Polygon.io (5 calls/minute free tier)
# Get key at: https://polygon.io/dashboard/signup
POLYGON_API_KEY=your_polygon_api_key_here

# NewsAPI (100 requests/day free tier)
# Get key at: https://newsapi.org/register
NEWS_API_KEY=your_newsapi_key_here

# Optional Additional APIs
YAHOO_FINANCE_API_KEY=optional_yahoo_finance_key
FMP_API_KEY=optional_financial_modeling_prep_key
MARKETAUX_API_KEY=optional_marketaux_key
FRED_API_KEY=optional_federal_reserve_key
OPENWEATHER_API_KEY=optional_openweather_key

# ============================================================================
# SEC COMPLIANCE SETTINGS
# ============================================================================
SEC_EDGAR_USER_AGENT=YourCompany your.email@example.com
SEC_COMPLIANCE_MODE=enabled
AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=2555  # 7 years for SEC compliance
DATA_RETENTION_DAYS=2555
TRANSACTION_LOGGING=true
COMPLIANCE_REPORTS_ENABLED=true

# ============================================================================
# GDPR COMPLIANCE SETTINGS
# ============================================================================
GDPR_COMPLIANCE=enabled
PII_ENCRYPTION=enabled
DATA_ANONYMIZATION=enabled
RIGHT_TO_BE_FORGOTTEN=enabled
DATA_PORTABILITY=enabled
COOKIE_CONSENT_REQUIRED=true
PRIVACY_POLICY_VERSION=1.0
TERMS_OF_SERVICE_VERSION=1.0

# ============================================================================
# COST MONITORING & LIMITS
# ============================================================================
MONTHLY_BUDGET_LIMIT=50
DAILY_API_LIMIT_FINNHUB=1800
DAILY_API_LIMIT_ALPHA_VANTAGE=25
DAILY_API_LIMIT_POLYGON=150
DAILY_API_LIMIT_NEWS=100
API_RATE_LIMIT_BUFFER=0.8  # Use only 80% of limits for safety
COST_ALERT_THRESHOLD=40  # Alert at $40 (80% of budget)
ENABLE_COST_MONITORING=true

# ============================================================================
# MACHINE LEARNING & MODELS
# ============================================================================
MODEL_CACHE_TTL=900
PREDICTION_CONFIDENCE_THRESHOLD=0.6
ENABLE_MODEL_VERSIONING=true
MODEL_REGISTRY_URL=optional_mlflow_url
ENABLE_ONLINE_LEARNING=false
BATCH_PREDICTION_SIZE=100
GPU_ENABLED=false
MAX_MODEL_MEMORY_MB=512

# Hugging Face Hub Integration (Model & Dataset Storage)
# Get token at: https://huggingface.co/settings/tokens
HF_TOKEN=your_huggingface_token_here
HF_HOME=/app/ml_models/.hf_cache
HF_MODEL_REPO=your-username/investment-analysis-models
HF_DATASET_REPO=your-username/investment-ml-datasets
HF_HUB_ENABLED=false
HF_AUTO_UPLOAD=false
HF_AUTO_DOWNLOAD=false
HF_PRIVATE_REPOS=true

# ============================================================================
# CELERY & BACKGROUND TASKS
# ============================================================================
CELERY_BROKER_URL=${REDIS_URL}
CELERY_RESULT_BACKEND=${REDIS_URL}
CELERY_WORKER_CONCURRENCY=2
CELERY_WORKER_MAX_TASKS_PER_CHILD=100
CELERY_TASK_TIME_LIMIT=300
CELERY_TASK_SOFT_TIME_LIMIT=240
CELERY_TIMEZONE=UTC

# ============================================================================
# AIRFLOW CONFIGURATION
# ============================================================================
AIRFLOW_DB_HOST=${DB_HOST}
AIRFLOW_DB_PORT=${DB_PORT}
AIRFLOW_DB_NAME=airflow
AIRFLOW_DB_USER=airflow
AIRFLOW_DB_PASSWORD=your_airflow_db_password_here
AIRFLOW_CORE_PARALLELISM=8
AIRFLOW_DAG_CONCURRENCY=4
AIRFLOW_MAX_ACTIVE_RUNS=2
AIRFLOW_WEBSERVER_PORT=8080
AIRFLOW_ADMIN_USERNAME=admin
AIRFLOW_ADMIN_PASSWORD=your_airflow_admin_password_here
AIRFLOW_ADMIN_EMAIL=admin@example.com

# ============================================================================
# MONITORING & OBSERVABILITY
# ============================================================================
# Metrics
ENABLE_METRICS=true
METRICS_PORT=9090
PROMETHEUS_PUSHGATEWAY_URL=optional_prometheus_url

# Logging
LOG_FORMAT=json
LOG_FILE_PATH=/var/log/investment_app
LOG_ROTATION_SIZE=100M
LOG_RETENTION_DAYS=30
ENABLE_REQUEST_LOGGING=true
ENABLE_PERFORMANCE_LOGGING=true

# Sentry Error Tracking
SENTRY_DSN=optional_sentry_dsn_here
SENTRY_ENVIRONMENT=${ENVIRONMENT}
SENTRY_TRACES_SAMPLE_RATE=0.1

# Grafana (Note: Docker maps to port 3001 externally, 3000 internally)
GRAFANA_URL=http://localhost:3001
GRAFANA_PORT=3001
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=your_grafana_password_here

# Slack Notifications
SLACK_WEBHOOK_URL=optional_slack_webhook_url
SLACK_CHANNEL=#alerts
ENABLE_SLACK_NOTIFICATIONS=false

# AlertManager Webhook Integration
ALERTMANAGER_URL=http://alertmanager:9093
PAGERDUTY_URL=https://events.pagerduty.com/v2/enqueue
PAGERDUTY_ROUTING_KEY=optional_pagerduty_routing_key
GENERIC_WEBHOOK_URL=optional_generic_webhook_url
GENERIC_WEBHOOK_AUTH_TOKEN=optional_auth_token
ALERT_GENERATOR_URL=http://investment-platform/metrics
SERVICE_NAME=investment-analysis-platform
GRAFANA_DASHBOARD_URL=http://grafana:3000
SLACK_BOT_NAME=Investment Platform Alerts

# Alert Thresholds (configurable)
ALERT_API_ERROR_RATE_WARNING=0.01
ALERT_API_ERROR_RATE_CRITICAL=0.05
ALERT_RESPONSE_TIME_WARNING=1.5
ALERT_RESPONSE_TIME_CRITICAL=2.0
ALERT_CACHE_HIT_RATE_WARNING=0.85
ALERT_CACHE_HIT_RATE_CRITICAL=0.80
ALERT_MEMORY_USAGE_WARNING=0.80
ALERT_MEMORY_USAGE_CRITICAL=0.85
ALERT_BUDGET_USAGE_WARNING=0.70
ALERT_BUDGET_USAGE_CRITICAL=0.85
ALERT_PIPELINE_SUCCESS_WARNING=0.95
ALERT_PIPELINE_SUCCESS_CRITICAL=0.90
ALERT_ML_ACCURACY_WARNING=0.75
ALERT_ML_ACCURACY_CRITICAL=0.65

# ============================================================================
# FRONTEND CONFIGURATION
# ============================================================================
REACT_APP_API_URL=http://localhost:8000
REACT_APP_WS_URL=ws://localhost:8000/api/ws
REACT_APP_ENVIRONMENT=${ENVIRONMENT}
REACT_APP_VERSION=1.0.0
REACT_APP_GOOGLE_ANALYTICS_ID=optional_ga_id
REACT_APP_ENABLE_ANALYTICS=false
REACT_APP_SENTRY_DSN=optional_frontend_sentry_dsn

# ============================================================================
# DEPLOYMENT & INFRASTRUCTURE
# ============================================================================
# Docker Registry
DOCKER_REGISTRY=docker.io
DOCKER_USERNAME=your_docker_username
DOCKER_PASSWORD=your_docker_password
DOCKER_IMAGE_PREFIX=investment-app

# Kubernetes
KUBERNETES_NAMESPACE=investment-app
KUBERNETES_CONTEXT=your_k8s_context
ENABLE_AUTOSCALING=true
MIN_REPLICAS=1
MAX_REPLICAS=5

# Cloud Provider (DigitalOcean)
DIGITALOCEAN_ACCESS_TOKEN=your_do_token_here
DIGITALOCEAN_CLUSTER_ID=your_cluster_id_here
DIGITALOCEAN_REGION=nyc3
DIGITALOCEAN_SPACES_KEY=optional_spaces_key
DIGITALOCEAN_SPACES_SECRET=optional_spaces_secret

# Cloud Provider (AWS Alternative)
AWS_ACCESS_KEY_ID=optional_aws_key
AWS_SECRET_ACCESS_KEY=optional_aws_secret
AWS_REGION=us-east-1
AWS_S3_BUCKET=optional_s3_bucket

# SSL/TLS
SSL_ENABLED=false
SSL_CERT_PATH=/etc/ssl/certs/cert.pem
SSL_KEY_PATH=/etc/ssl/private/key.pem
FORCE_HTTPS=false

# ============================================================================
# PERFORMANCE OPTIMIZATION
# ============================================================================
# Database
POSTGRES_SHARED_BUFFERS=256MB
POSTGRES_EFFECTIVE_CACHE_SIZE=1GB
POSTGRES_MAX_CONNECTIONS=100
POSTGRES_WORK_MEM=4MB
DB_POOL_SIZE=20
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# Caching
CACHE_TTL_DEFAULT=300
CACHE_TTL_STOCK_PRICES=60
CACHE_TTL_STOCK_FUNDAMENTALS=3600
CACHE_TTL_NEWS=1800
CACHE_TTL_RECOMMENDATIONS=900
ENABLE_CACHE_WARMING=true

# API Response
API_RATE_LIMIT_PER_MINUTE=60
API_TIMEOUT_SECONDS=30
API_MAX_PAGE_SIZE=100
API_DEFAULT_PAGE_SIZE=20

# Workers & Processes
NGINX_WORKER_PROCESSES=2
NGINX_WORKER_CONNECTIONS=1024
GUNICORN_WORKERS=4
GUNICORN_THREADS=2
GUNICORN_TIMEOUT=120

# ============================================================================
# SECURITY SETTINGS
# ============================================================================
# CORS
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8000
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=86400

# Session
SESSION_COOKIE_SECURE=false  # Set to true in production with HTTPS
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=lax
SESSION_TIMEOUT_MINUTES=60

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_IP=100
RATE_LIMIT_PER_USER=1000
RATE_LIMIT_WINDOW_MINUTES=15

# Security Headers
ENABLE_SECURITY_HEADERS=true
HSTS_MAX_AGE=31536000
CSP_POLICY=default-src 'self'

# ============================================================================
# TESTING & DEVELOPMENT
# ============================================================================
TEST_DATABASE_URL=postgresql://postgres:postgres@localhost:5432/investment_db_test
TEST_REDIS_URL=redis://localhost:6379/1
ENABLE_TEST_ENDPOINTS=false
MOCK_EXTERNAL_APIS=false
SELENIUM_GRID_URL=optional_selenium_url

# ============================================================================
# BACKUP & DISASTER RECOVERY
# ============================================================================
ENABLE_AUTOMATIC_BACKUPS=false
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=optional_backup_bucket
BACKUP_ENCRYPTION_KEY=optional_backup_encryption_key
DISASTER_RECOVERY_MODE=false

# ============================================================================
# FEATURE FLAGS
# ============================================================================
ENABLE_SOCIAL_FEATURES=false
ENABLE_PREMIUM_FEATURES=false
ENABLE_BETA_FEATURES=false
ENABLE_ADMIN_PANEL=true
ENABLE_API_DOCUMENTATION=true
ENABLE_WEBSOCKET_UPDATES=true
ENABLE_EMAIL_NOTIFICATIONS=false
ENABLE_PUSH_NOTIFICATIONS=false

# ============================================================================
# EMAIL CONFIGURATION (Optional)
# ============================================================================
EMAIL_BACKEND=smtp
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=true
EMAIL_USERNAME=your_email@example.com
EMAIL_PASSWORD=your_email_password_here
DEFAULT_FROM_EMAIL=noreply@example.com

# ============================================================================
# CLAUDE FLOW V3 INTEGRATION
# ============================================================================
# Configuration for neural pattern training and swarm coordination
CLAUDE_FLOW_CONFIG=./.claude-flow/config.yaml
CLAUDE_FLOW_LOG_LEVEL=info
CLAUDE_FLOW_MEMORY_BACKEND=hybrid
CLAUDE_FLOW_MEMORY_PATH=./.swarm/memory.db
CLAUDE_FLOW_MCP_PORT=3000
CLAUDE_FLOW_MCP_HOST=localhost
CLAUDE_FLOW_MCP_TRANSPORT=stdio

# Swarm Configuration
SWARM_TOPOLOGY=hierarchical
SWARM_MAX_AGENTS=8
SWARM_STRATEGY=specialized
SWARM_CONSENSUS=raft

# Performance Targets
AGENT_SPAWN_TIMEOUT_MS=200
SWARM_COORDINATION_TIMEOUT_MS=100
SONA_ADAPTATION_TARGET_MS=0.05
HNSW_SEARCH_SPEEDUP=150

# Neural Training
NEURAL_PATTERN_EPOCHS=50
NEURAL_EMBEDDING_DIM=256
NEURAL_BATCH_SIZE=32
NEURAL_LEARNING_RATE=0.01

# ============================================================================
# END OF CONFIGURATION
# ============================================================================
# Remember to:
# 1. Never commit this file with real values to version control
# 2. Use strong, unique passwords for each service
# 3. Rotate API keys and passwords regularly
# 4. Keep this file secure with appropriate file permissions (chmod 600)
# 5. Use environment-specific files (.env.development, .env.production)
# ============================================================================