# =============================================================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env.production and fill in your actual values
# NEVER commit .env.production to version control

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
APP_NAME="Investment Analysis Platform"
APP_VERSION="1.0.0"
APP_ENV=production
DEBUG=False
SECRET_KEY=your-very-long-random-secret-key-change-this-in-production
ALLOWED_HOSTS=["yourdomain.com","www.yourdomain.com","api.yourdomain.com"]

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DB_NAME=investment_db
DB_USER=investment_user
DB_PASSWORD=your-secure-database-password
DB_HOST=postgres
DB_PORT=5432
DATABASE_URL=postgresql://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_NAME}

# Database Pool Settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=40
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_PASSWORD=your-secure-redis-password
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_MAX_MEMORY=1gb
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# =============================================================================
# ELASTICSEARCH CONFIGURATION
# =============================================================================
ELASTIC_PASSWORD=your-secure-elastic-password
ES_HOST=elasticsearch
ES_PORT=9200
ES_HEAP_SIZE=2g
ELASTICSEARCH_URL=http://elastic:${ELASTIC_PASSWORD}@${ES_HOST}:${ES_PORT}

# =============================================================================
# RABBITMQ CONFIGURATION
# =============================================================================
RABBITMQ_USER=investment_mq
RABBITMQ_PASSWORD=your-secure-rabbitmq-password
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_MGMT_PORT=15672
RABBITMQ_VHOST=investment

# =============================================================================
# CELERY CONFIGURATION
# =============================================================================
CELERY_BROKER_URL=amqp://${RABBITMQ_USER}:${RABBITMQ_PASSWORD}@${RABBITMQ_HOST}:${RABBITMQ_PORT}/${RABBITMQ_VHOST}
CELERY_RESULT_BACKEND=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/1
CELERY_TASK_TIME_LIMIT=3600
CELERY_TASK_SOFT_TIME_LIMIT=3300
CELERY_WORKER_CONCURRENCY=4

# =============================================================================
# AIRFLOW CONFIGURATION
# =============================================================================
AIRFLOW_FERNET_KEY=your-base64-encoded-32-byte-key
AIRFLOW_ADMIN_USER=admin
AIRFLOW_ADMIN_PASSWORD=your-secure-airflow-password
AIRFLOW_PORT=8080

# =============================================================================
# JWT AUTHENTICATION
# =============================================================================
JWT_SECRET_KEY=your-very-long-random-jwt-secret-key
JWT_ALGORITHM=HS256
JWT_EXPIRATION_MINUTES=60
JWT_REFRESH_EXPIRATION_DAYS=30

# =============================================================================
# API KEYS - FINANCIAL DATA PROVIDERS
# =============================================================================
# Your preserved API keys from .env
ALPHA_VANTAGE_API_KEY=4265EWGEBCXVE3RP
FINNHUB_API_KEY=d295ehpr01qhoena0ffgd295ehpr01qhoena0fg0
POLYGON_API_KEY=lwi0HlBLeyuDwSAIX6H5gpM4jM4xqLgk
NEWS_API_KEY=c2173d404c67434cbd4ed9f94a71ed67

# Additional API Keys (obtain from providers)
IEX_CLOUD_API_KEY=your-iex-cloud-api-key
FMP_API_KEY=your-fmp-api-key
FRED_API_KEY=your-fred-api-key
QUANDL_API_KEY=your-quandl-api-key

# =============================================================================
# EMAIL CONFIGURATION (Gmail SMTP)
# =============================================================================
# Enable email alerts (set to true to activate)
ENABLE_EMAIL_ALERTS=true

# Gmail SMTP Configuration
# Note: Use an App Password, not your regular Gmail password
# Generate at: https://myaccount.google.com/apppasswords
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-alerts@gmail.com
SMTP_PASSWORD=your-app-specific-password
SMTP_FROM=Investment Platform <alerts@yourdomain.com>

# Email Recipients
EMAIL_FROM="Investment Analysis <noreply@yourdomain.com>"
EMAIL_ADMIN=admin@yourdomain.com

# AlertManager Email Recipients
ALERT_EMAIL_TO=admin@yourdomain.com
COST_ALERT_EMAIL_TO=finance@yourdomain.com

# AlertManager Webhook Authentication
ALERTMANAGER_WEBHOOK_PASSWORD=your-secure-webhook-password

# =============================================================================
# MONITORING
# =============================================================================
GRAFANA_USER=admin
GRAFANA_PASSWORD=your-secure-grafana-password
GRAFANA_PORT=3001
PROMETHEUS_PORT=9090

# Sentry Configuration (Optional)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
CORS_ORIGINS=["https://yourdomain.com","https://www.yourdomain.com","https://api.yourdomain.com"]
CORS_ALLOW_CREDENTIALS=true

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_DEFAULT=100/minute
RATE_LIMIT_AUTH=5/minute
RATE_LIMIT_API=1000/hour

# =============================================================================
# SSL/TLS CONFIGURATION (Let's Encrypt)
# =============================================================================
# Domain for SSL certificate
SSL_DOMAIN=yourdomain.com
SSL_EMAIL=admin@yourdomain.com

# Certificate paths (auto-configured by init-ssl.sh)
SSL_CERT_PATH=/etc/nginx/ssl/fullchain.pem
SSL_KEY_PATH=/etc/nginx/ssl/privkey.pem
FORCE_SSL=true

# =============================================================================
# SECURITY
# =============================================================================

# Session Configuration
SESSION_SECRET_KEY=your-session-secret-key
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=strict

# CSRF Protection
CSRF_SECRET_KEY=your-csrf-secret-key
CSRF_ENABLED=true

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================
# Container Replicas
BACKEND_REPLICAS=2
WORKER_REPLICAS=2
FRONTEND_REPLICAS=2

# Port Configuration
FRONTEND_PORT=80
FRONTEND_SSL_PORT=443
API_URL=https://api.yourdomain.com
WS_URL=wss://api.yourdomain.com

# =============================================================================
# LOGGING
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_OUTPUT=file
LOG_FILE_PATH=/app/logs/app.log
LOG_FILE_MAX_SIZE=100M
LOG_FILE_BACKUP_COUNT=10

# =============================================================================
# MACHINE LEARNING
# =============================================================================
ML_MODELS_PATH=/app/ml_models
ML_TRAINING_ENABLED=true
ML_MODEL_CACHE_TTL=3600
ML_BATCH_SIZE=32
ML_MAX_WORKERS=4

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30

# S3 Configuration (Optional - leave empty for local-only backups)
# S3 Glacier storage class is used for cost efficiency
BACKUP_S3_BUCKET=investment-platform-backups
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=us-east-1

# Backup Notification Webhooks (Optional)
# AlertManager webhook for backup failure notifications
ALERT_WEBHOOK_URL=http://backend:8000/api/alerts/backup-webhook
# Slack webhook for backup notifications (optional)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_REAL_TIME_STREAMING=true
FEATURE_ADVANCED_ANALYTICS=true
FEATURE_SOCIAL_SENTIMENT=true
FEATURE_OPTIONS_ANALYSIS=true
FEATURE_CRYPTO_TRADING=false
FEATURE_FOREX_TRADING=false

# =============================================================================
# COMPLIANCE (SEC 2025 + GDPR)
# =============================================================================
COMPLIANCE_MODE=SEC
AUDIT_LOG_ENABLED=true
DATA_RETENTION_DAYS=2555

# GDPR Compliance
GDPR_COMPLIANCE=true
PII_ENCRYPTION=true
# GDPR encryption key for PII data (44-char base64 Fernet key)
# Generate with: python3 -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
GDPR_ENCRYPTION_KEY=your-base64-encoded-fernet-encryption-key-here

# SEC 2025 Compliance
SEC_AUDIT_RETENTION_YEARS=7
SEC_RECOMMENDATION_DISCLOSURE_ENABLED=true
# All recommendations include: methodology disclosure, risk warnings, limitations